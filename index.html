<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>SIMARSIP App</title>
  <!-- Load modern font -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

  <!-- Framework7 CSS -->
  <link rel="stylesheet" href="node_modules/framework7/framework7-bundle.min.css">

  <!-- Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/framework7-icons/css/framework7-icons.css">

  <!-- Custom CSS -->
  <link rel="stylesheet" href="my-app.css">
  
</head>

<body>
  <div id="app">
    <!-- Left panel with reveal effect-->
    <div class="panel panel-left panel-reveal">
      <div class="view">
        <div class="page">
          <div class="navbar">
            <div class="navbar-bg"></div>
            <div class="navbar-inner">
              <div class="title">Menu</div>
            </div>
          </div>
          <div class="page-content">
            <div class="block-title">Preferensi</div>
            <div class="list simple-list">
              <ul>
                <li>
                  <div class="item-content">
                    <div class="item-inner">
                      <div class="item-title">Dark Mode</div>
                      <div class="item-after">
                        <label class="toggle" id="dark-mode-toggle">
                          <input type="checkbox"/>
                          <span class="toggle-icon"></span>
                        </label>
                      </div>
                    </div>
                  </div>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="view view-main">
      <div data-name="home" class="page">

        <!-- NAVBAR -->
        <div class="navbar">
          <div class="navbar-bg"></div>
          <div class="navbar-inner">
            <div class="left">
              <a href="#" class="link icon-only panel-open" data-panel="left">
                <i class="f7-icons">menu</i>
              </a>
            </div>
            <div class="title">SIMARSIP APP</div>
            <div class="right">
              <a href="/profile/" class="link user-profile">
                <i class="f7-icons">person_circle</i>
                <span>Halo, HMIF!</span>
              </a>
            </div>
          </div>
        </div>
      
        <!-- PAGE CONTENT -->
        <div class="page-content">

          <!-- WELCOME BANNER -->
          <div class="block block-strong inset">
            <h3 class="no-margin-top">Selamat Datang!</h3>
            <p class="no-margin-bottom">Kelola pengajuan surat dan peminjaman dengan mudah.</p>
          </div>

          <!-- SEARCH BAR -->
          <form class="searchbar">
            <div class="searchbar-inner">
              <div class="searchbar-input-wrap">
                <input type="search" placeholder="Cari pengajuan...">
                <i class="searchbar-icon"></i>
                <span class="input-clear-button"></span>
              </div>
              <span class="searchbar-disable-button if-not-aurora">Cancel</span>
            </div>
          </form>

          <!-- AJUKAN SURAT BARU -->
          <div class="block-title">Ajukan Cepat</div>
          <div class="block">
            <div class="row">
              <div class="col-33">
                <a href="#" id="btn-room" class="card menu-card-new">
                  <div class="icon" style="background-color: #2196f3;"><i class="f7-icons">building_2_fill</i></div>
                  <span>Ruangan</span>
                </a>
              </div>
              <div class="col-33">
                <a href="#" id="btn-dispen" class="card menu-card-new">
                  <div class="icon" style="background-color: #ff9800;"><i class="f7-icons">doc_text_fill</i></div>
                  <span>Dispen</span>
                </a>
              </div>
              <div class="col-33">
                <a href="#" id="btn-item" class="card menu-card-new">
                  <div class="icon" style="background-color: #f44336;"><i class="f7-icons">cube_box_fill</i></div>
                  <span>Peralatan</span>
                </a>
              </div>
            </div>
          </div>

          <!-- STATUS PENGAJUAN -->
          <div class="block-title">Status Pengajuan Terakhir</div>
          <div class="list media-list inset">
            <ul>
              <li>
                <a href="#" id="status-1" class="item-link item-content">
                  <div class="item-media"><i class="f7-icons icon-approve">checkmark_circle_fill</i></div>
                  <div class="item-inner">
                    <div class="item-title-row">
                      <div class="item-title">Peminjaman Ruangan</div>
                    </div>
                    <div class="item-subtitle">Ruang 305</div>
                    <div class="item-text">10/06/2025 - 15:00-17:00</div>
                  </div>
                </a>
              </li>
              <li>
                <a href="#" id="status-2" class="item-link item-content">
                  <div class="item-media"><i class="f7-icons icon-wait">hourglass</i></div>
                  <div class="item-inner">
                    <div class="item-title-row">
                      <div class="item-title">Peminjaman Peralatan</div>
                    </div>
                    <div class="item-subtitle">Proyektor</div>
                    <div class="item-text">10/06/2025 - 2 hari</div>
                  </div>
                </a>
              </li>
              <li>
                <a href="#" id="status-3" class="item-link item-content">
                  <div class="item-media"><i class="f7-icons icon-approve">checkmark_circle_fill</i></div>
                  <div class="item-inner">
                    <div class="item-title-row">
                      <div class="item-title">Surat Dispensasi</div>
                    </div>
                    <div class="item-subtitle">Acara Makrab</div>
                    <div class="item-text">09/06/2025</div>
                  </div>
                </a>
              </li>
              <li>
                <a href="#" id="status-4" class="item-link item-content">
                  <div class="item-media"><i class="f7-icons icon-reject">xmark_circle_fill</i></div>
                  <div class="item-inner">
                    <div class="item-title-row">
                      <div class="item-title">Peminjaman Ruangan</div>
                    </div>
                    <div class="item-subtitle">GSG</div>
                    <div class="item-text">08/06/2025 - 09:00-12:00</div>
                  </div>
                </a>
              </li>
            </ul>
          </div>

          <!-- LINK LIHAT SEMUA RIWAYAT -->
          <div class="see-more-container">
            <a href="/history/" class="see-more" id="btn-all-history" aria-label="Lihat Semua Riwayat">
              <span>Lihat Semua Riwayat</span>
              <i class="f7-icons">chevron_right</i>
            </a>
          </div>

        </div>
      
        <!-- TOOLBAR BAWAH -->
        <div class="toolbar toolbar-bottom">
          <div class="toolbar-inner">
            <a href="/home/" class="link active" id="btn-home">
              <div class="link-content">
                <i class="f7-icons">house_fill</i>
                <span>Beranda</span>
              </div>
            </a>
            <a href="/calendar/" class="link" id="btn-calendar">
              <div class="link-content">
                <i class="f7-icons">calendar</i>
                <span>Kalender</span>
              </div>
            </a>
            <a href="#" class="link" id="btn-notification">
              <div class="link-content">
                <i class="f7-icons">bell_fill</i>
                <span>Notifikasi</span>
                <span id="notif-badge" class="notif-badge" style="display:none;"></span>
              </div>
            </a>
            <a href="#" class="link" id="btn-help">
              <div class="link-content">
                <i class="f7-icons">question_circle</i>
                <span>Bantuan</span>
              </div>
            </a>
          </div>
        </div>
      
      </div>
    </div>
  </div>

  <!-- Scripts - Urutan penting! -->
  <script src="node_modules/framework7/framework7-bundle.min.js"></script>
  <script src="js/calendar.js"></script>
  <script src="js/routes.js"></script>
  <script src="my-app.js"></script>
  <script>
    // Jika belum login â†’ arahkan ke auth.html
    if (!localStorage.getItem("isLoggedIn")) {
        window.location.href = "pages/auth.html";
    }

    // Dark Mode Toggle Handler
    document.addEventListener('DOMContentLoaded', function () {
      const toggle = document.getElementById('dark-mode-toggle');
      const html = document.documentElement;

      // Set initial state
      if (html.classList.contains('dark')) {
        toggle.querySelector('input').checked = true;
      }

      toggle.addEventListener('change', function (e) {
        if (e.target.checked) {
          html.classList.add('dark');
        } else {
          html.classList.remove('dark');
        }
      });
    });
  </script>
</body>
</html>